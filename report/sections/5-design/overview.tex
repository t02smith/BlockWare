\newpage
\section{Design Considerations}

\input{sections/5-design/data.tex}
\input{sections/5-design/architecture.tex}

\input{sections/5-design/eth.tex}
\input{sections/5-design/p2p.tex}

\subsection*{Downloading Content}

Games will be content addressable, using their root hash stored on the blockchain. This will be used to help connect nodes who are interested in the same content (\textbf{F\_M3}). Once a user connects to a node it will:
\vspace{2mm}
\begin{enumerate}
  \item Send their proof of purchase (\textbf{F\_S2}).
  \item request individual shards from the node using the shard's hash (\textbf{F\_M2}),
  \item use the metadata from the blockchain to verify the shard's contents (\textbf{F\_M7}),
  \item send a confirmation message that proves the successful transfer of a block (\textbf{F\_S1}),
  \item and repeat this until the entirety of the game is installed (\textbf{F\_M6}).
\end{enumerate}

\vspace{2mm}\noindent As the blockchain will only be used to store metadata about games uploaded to the network, not every node will have each game installed. Instead, this project will take ideas from networks like BitTorrent, where nodes will seek out peers who have the game installed using a tracker hosted by the uploader.

\subsection*{Updating Content}

To satisfy \textbf{F\_M4}, developers will perform the same steps as in \textbf{Uploading Content} but will also include the hash of a previous block that contains the older version of the game. This relationship will allow users ownership to all versions of a game they have purchased and not just a singular version. This will include the restriction that only the original uploader can upload an update for their game (\textbf{NF\_S2}).

\vspace{2mm}\noindent Each version will be considered as a standalone game and will require users to download the entirety by scratch. Whilst this isn't reflective of how updates are typically managed, this will be acceptable for the scope of this project and any changes will be considered as a future extension to this project.

\subsubsection*{Downloadable Content}

Developers will typically offer paid or free DLC (\textbf{F\_S3}) for their games that users will purchase separately. Each DLC will need:

\begin{enumerate}
  \item \textbf{Dependency} A reference to the oldest version of the game they apply to, and
  \item \textbf{Previous Version} A pointer to the previous version of the DLC.
\end{enumerate}

\begin{figure}[ht]
  \centering
  \includegraphics[width=.85\textwidth]{assets/images/diagrams/software.png}
  \caption{How blocks relate to each other. An update will reference the previous version whilst a DLC will reference, which piece of software and version it is dependent on.}
\end{figure}

\subsection*{Proving Contribution}

A purchase certificate will include a confidential \textit{seeder token}. When a user successful downloads a shard of data they will send a confirmation message, including their seeder token, that is encrypted with the game developer's public key. A user will prove their contribution (\textbf{F\_S1}) by sending a collection of these messages to the developer, who can decrypt and validate the tokens.
